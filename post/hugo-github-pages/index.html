<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>My New Hugo Site  | Hugo Github Pages</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">

    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="generator" content="Hugo 0.30.2" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    <link href='https://danielmoi.github.io/blog/dist/main.css' rel='stylesheet' type="text/css" />
    
      
    

    

    <meta property="og:title" content="Hugo Github Pages" />
<meta property="og:description" content="Hugo New site Get Hugo to generate a new site:
hugo new site blog  Let&rsquo;s check it out!
cd blog ls -1 archetypes config.toml content data layouts static themes  Git Initialize git repo
git init  Theme Let&rsquo;s install a theme. We will add this as a Git submodule (so that its history will be kept separate from our own code)
git submodule add https://github.com/budparr/gohugo-theme-ananke.git themes/ananke;  Now we have added that repo inside our themes directory - /themes/ananke" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://danielmoi.github.io/blog/post/hugo-github-pages/" />



<meta property="article:published_time" content="2017-11-26T13:45:33&#43;11:00"/>

<meta property="article:modified_time" content="2017-11-26T13:45:33&#43;11:00"/>











<meta itemprop="name" content="Hugo Github Pages">
<meta itemprop="description" content="Hugo New site Get Hugo to generate a new site:
hugo new site blog  Let&rsquo;s check it out!
cd blog ls -1 archetypes config.toml content data layouts static themes  Git Initialize git repo
git init  Theme Let&rsquo;s install a theme. We will add this as a Git submodule (so that its history will be kept separate from our own code)
git submodule add https://github.com/budparr/gohugo-theme-ananke.git themes/ananke;  Now we have added that repo inside our themes directory - /themes/ananke">


<meta itemprop="datePublished" content="2017-11-26T13:45:33&#43;11:00" />
<meta itemprop="dateModified" content="2017-11-26T13:45:33&#43;11:00" />
<meta itemprop="wordCount" content="1126">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Hugo Github Pages"/>
<meta name="twitter:description" content="Hugo New site Get Hugo to generate a new site:
hugo new site blog  Let&rsquo;s check it out!
cd blog ls -1 archetypes config.toml content data layouts static themes  Git Initialize git repo
git init  Theme Let&rsquo;s install a theme. We will add this as a Git submodule (so that its history will be kept separate from our own code)
git submodule add https://github.com/budparr/gohugo-theme-ananke.git themes/ananke;  Now we have added that repo inside our themes directory - /themes/ananke"/>

  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://danielmoi.github.io/blog" class="f3 fw2 hover-white no-underline white-90 dib">
      My New Hugo Site
    </a>
    <div class="flex-l items-center">
      
      








    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  <div class="flex-l mt2 mw8 center">
    <article class="center cf pv5 ph3 ph4-ns mw7">
      <p class="f6 b helvetica tracked">
        
        POST
      </p>
      <h1 class="f1 athelas">
        Hugo Github Pages
      </h1>
        
        
      <time class="f6 mv4 dib tracked" datetime="2017-11-26T13:45:33&#43;11:00">
        November 26, 2017
      </time>
      <section class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray">
        

<h1 id="hugo">Hugo</h1>

<h2 id="new-site">New site</h2>

<p>Get Hugo to generate a new site:</p>

<pre><code>hugo new site blog
</code></pre>

<p>Let&rsquo;s check it out!</p>

<pre><code>cd blog
ls -1

archetypes
config.toml
content
data
layouts
static
themes
</code></pre>

<h2 id="git">Git</h2>

<p>Initialize git repo</p>

<pre><code>git init
</code></pre>

<h2 id="theme">Theme</h2>

<p>Let&rsquo;s install a theme. We will add this as a Git <code>submodule</code> (so that its history will be kept separate from our own code)</p>

<pre><code>git submodule add https://github.com/budparr/gohugo-theme-ananke.git themes/ananke;
</code></pre>

<p>Now we have added that repo inside our <code>themes</code> directory - <code>/themes/ananke</code></p>

<p>Git has also created a <code>.gitmodules</code> file to keep track of what&rsquo;s going on:</p>

<pre><code>[submodule &quot;themes/ananke&quot;]
	path = themes/ananke
	url = https://github.com/budparr/gohugo-theme-ananke.git
</code></pre>

<h2 id="config">Config</h2>

<p>We need to let Hugo know that we want to use that theme.</p>

<p>In <code>.config.toml</code>, add this line:</p>

<pre><code>theme = &quot;ananke&quot;
</code></pre>

<p>We also need to let Hugo how to construct the internal links properly - we need
to provide a <code>baseURL</code> - we will be using GitHub Pages, so we need to add our
repository name as subdirectory.</p>

<pre><code>baseURL = &quot;https://danielmoi.github.io/blog&quot;
</code></pre>

<h2 id="content">Content</h2>

<p>Let&rsquo;s make our first page!</p>

<pre><code>hugo new post/hello.md
</code></pre>

<p>Edit <code>/content/post/hello.md</code> and remove <code>draft: true</code> so that it will be generated later on.</p>

<h2 id="deploy-locally">Deploy locally</h2>

<p>Start our server in watch mode, and include drafts</p>

<pre><code>hugo server -w -D
</code></pre>

<p>Check out our new site in the browser at the address given!</p>

<pre><code>http://localhost:1313/blog
</code></pre>

<p>Exciting!</p>

<h2 id="generate-static-giles">Generate static giles</h2>

<p>Note that we don&rsquo;t have a <code>public</code> folder. Our site is being deployed locally,
but we haven&rsquo;t generated the static files yet. Let&rsquo;s do that.</p>

<pre><code>hugo
</code></pre>

<p>Ridiculously simple.</p>

<p>Hugo would have told us that it did:</p>

<pre><code>@ hugo
Started building sites ...

Built site for language en:
0 draft content
0 future content
0 expired content
1 regular pages created
8 other pages created
0 non-page files copied
1 paginator pages created
0 tags created
0 categories created
total in 7 ms
</code></pre>

<h2 id="gitignore">Gitignore</h2>

<p>We don&rsquo;t want to commit our generated static files into version control. We need
them to generate our site, but we don&rsquo;t need to add them to our <code>master</code> branch.</p>

<p>Create a <code>.gitignore</code> and add <code>public</code>:</p>

<pre><code>public
</code></pre>

<h2 id="first-commit">First commit</h2>

<p>Let&rsquo;s commit what we&rsquo;ve done so far.</p>

<pre><code>No commits yet

Changes to be committed:
  (use &quot;git rm --cached &lt;file&gt;...&quot; to unstage)

	new file:   .gitmodules
	new file:   themes/ananke

Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)

	.gitignore
	archetypes/
	config.toml
	content/

</code></pre>

<pre><code>git add .
git commit -m 'First commit'
</code></pre>

<p>Let&rsquo;s add a remote, set an upstream, and push up to GitHub</p>

<pre><code>$ git remote add origin git@github.com:danielmoi/blog.git
$ git push -u origin master
</code></pre>

<h2 id="setup-gh-pages-branch">Setup gh-pages branch</h2>

<p>We will be using this <code>gh-pages</code> branch to deploy to GitHub Pages.
We don&rsquo;t need any of the previous commits, so let&rsquo;s start afresh.
We do this by setting this up as an ORPHAN branch.</p>

<pre><code>git checkout --orphan gh-pages
</code></pre>

<p>Let&rsquo;s see what&rsquo;s in there</p>

<pre><code>$ git status

On branch gh-pages

No commits yet

Changes to be committed:
  (use &quot;git rm --cached &lt;file&gt;...&quot; to unstage)

	new file:   .gitignore
	new file:   .gitmodules
	new file:   archetypes/default.md
	new file:   config.toml
	new file:   content/post/hello.md
	new file:   themes/ananke
</code></pre>

<p>Now let&rsquo;s reset the branch.</p>

<pre><code>git reset --hard
</code></pre>

<p>This will remove most of the files, but we need to remove <code>public</code> and <code>themes</code></p>

<p>We can check what&rsquo;s left:</p>

<pre><code>public
themes
</code></pre>

<p>That&rsquo;s okay, because we will not add anything, we are just going to commit this as an (empty) branch.</p>

<pre><code>git commit --allow-empty -m &quot;Initializing gh-pages branch&quot;
</code></pre>

<p>Now let&rsquo;s push to GitHub</p>

<pre><code>git push origin gh-pages
</code></pre>

<p>If we check out this branch on GitHub, we can confirm that there is a commit,
but are no files or directories in it.</p>

<p>This is now a new branch, with NOTHING in it.</p>

<h2 id="setup-public-folder-to-hold-that-gh-pages-branch">Setup public folder to hold that gh-pages branch</h2>

<p>We will use git worktrees to accomplish this.</p>

<p>We start off in the root directory, and on master branch.</p>

<pre><code>$ git checkout master
</code></pre>

<p>First, we need to remove our <code>public</code> directory</p>

<pre><code>rm -rf public
</code></pre>

<p>Now, let&rsquo;s set a worktree.
When we <code>cd</code> into <code>public</code>, we want to be checking out the <code>gh-pages</code> branch.
That is, in our <code>root</code> directory, we will have our <code>master</code> (and other)
branches, but in our <code>public</code> directory, we will be in our <code>gh-pages</code> branch.</p>

<pre><code>git worktree add -B gh-pages public origin/gh-pages
</code></pre>

<pre><code>-B                Create / Reset branch &quot;gh-pages&quot;

public            This is the path (directory) we want our worktree to live in

origin/gh-pages   This is the branch in the cloud
</code></pre>

<p>Git should have told us what it did:</p>

<pre><code>Branch 'gh-pages' set up to track remote branch 'gh-pages' from 'origin'.
Preparing public (identifier public)
HEAD is now at 445ffe6 Initialize gh-pages branch
</code></pre>

<p>Note that we need Git 2.5 or higher for this.</p>

<p>On MacOS, check the version of Git:</p>

<pre><code>$ git --version
</code></pre>

<p>And to upgrade Git,</p>

<pre><code>brew upgrade git
</code></pre>

<h2 id="check-that-worktree-is-working">Check that worktree is working</h2>

<p>Note that we if try to <code>checkout</code> our <code>gh-pages</code> branch, we will get an error:</p>

<pre><code>$ gco gh-pages
fatal: 'gh-pages' is already checked out at '&lt;path-to-repo&gt;/blog/public'
</code></pre>

<p>However, if we <code>cd</code> into <code>public</code>, we can see that we have <code>checkout</code>ed our
<code>gh-pages</code> branch! Don&rsquo;t worry if this is confusing - it will make more sense
moving forward.</p>

<p>Likewise, if we try to <code>checkout</code> our <code>master</code> branch, we get a similar error:</p>

<pre><code>$ gco master
fatal: 'master' is already checked out at '&lt;path-to-repo&gt;/blog'
</code></pre>

<p>We have TWO branches checked out simultaneously!</p>

<h2 id="populate-our-gh-pages-branch-with-out-static-files">Populate our gh-pages branch with out static files</h2>

<p>Let&rsquo;s go back to our master branch.
This means going UP ONE DIRECTORY, instead of changing branch, per se.</p>

<pre><code>$ cd ..
</code></pre>

<p>Now let&rsquo;s get Hugo to generate our static files again.</p>

<pre><code>hugo
</code></pre>

<p>Again, Hugo tells us what it has done:</p>

<pre><code>@ hugo
Started building sites ...

Built site for language en:
0 draft content
0 future content
0 expired content
1 regular pages created
8 other pages created
0 non-page files copied
0 paginator pages created
0 tags created
0 categories created
total in 2 ms

</code></pre>

<p>Now, when we <code>cd</code> into <code>public</code> we should see (ONLY) our static files - our new
site!</p>

<p>Let&rsquo;s check our Git status:</p>

<pre><code>On branch gh-pages
Your branch is up to date with 'origin/gh-pages'.

Untracked files:
  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)

	404.html
	categories/
	dist/
	index.html
	index.xml
	post/
	sitemap.xml
	tags/

</code></pre>

<p>Perfect.</p>

<p>Let&rsquo;s add all, commit, and push.</p>

<pre><code>$ git commit -m 'Thanks Hugo'
[gh-pages 2e4cbfb] Thanks Hugo
 14 files changed, 951 insertions(+)
 create mode 100644 404.html
 create mode 100644 categories/index.html
 create mode 100644 categories/index.xml
 create mode 100644 dist/app.bundle.js
 create mode 100644 dist/main.css
 create mode 100644 images/gohugo-default-sample-hero-image.jpg
 create mode 100644 index.html
 create mode 100644 index.xml
 create mode 100644 post/hello/index.html
 create mode 100644 post/index.html
 create mode 100644 post/index.xml
 create mode 100644 post/page/1/index.html
 create mode 100644 sitemap.xml
 create mode 100644 tags/index.html
 create mode 100644 tags/index.xml
</code></pre>

<h2 id="check-out-the-live-site">Check out the live site</h2>

<p>Note that you might need to go to GitHub / Settings
And make <code>gh-pages</code> branch the Source for GitHub pages.</p>

      </section>
      


    </article>
    <div class="ph3 mt2 mt6-ns">
      







  <div class="bg-light-gray pa3">
    <ul>
      <li class="list b mb3">
        1 More Post
      </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/blog/post/hugo-github-pages/" class="link ph2 pv2 db black o-50">
            Hugo Github Pages
          </a>
        </li>
      
        <li class="list f5 w-100 hover-bg-white nl1">
          
          <a href="/blog/post/hello/" class="link ph2 pv2 db black">
            Hello
          </a>
        </li>
      
    </ul>
  </div>


    </div>
  </div>

    </main>
    <footer class="bg-near-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://danielmoi.github.io/blog" >
    &copy; 2017 My New Hugo Site
  </a>
  








  </div>
</footer>

    <script src="https://danielmoi.github.io/blog/dist/app.bundle.js" async></script>

  </body>
</html>
